#:kivy 2.0
#:import Factory kivy.factory.Factory
#:include firebaseloginscreen.kv
#:import FirebaseLoginScreen firebaseloginscreen.FirebaseLoginScreen
#:import utils kivy.utils


<PokeDex>:
    MDBoxLayout:
        md_bg_color: .64, .72, .66, 1
        padding: 10
        id: poke
        orientation: "vertical"
        size_hint_y: .9
        Label:
            size_hint: 1, None
            text: "Poke-Dex"
            font_name: "PokeFont"
            font_size: self.width/10
            color: .17, .23, .2, 1
        BoxLayout:
            size_hint: 1, None
            orientation: "horizontal"
            Button:
                text: 'Number'
                size_hint: .3, .5
                pos_hint: {'x':.1, 'top': .9}
                background_normal: 'dark_bg.jpg'
                background_down: 'light_bg.jpg'
                color: .64, .72, .66, 1
                font_name: "PokeFont"
                on_release: root.GeneratePokemon(0)
            Button:
                text:"Name"
                font_name: "PokeFont"
                pos_hint: {'x':.5, 'top': .9}
                size_hint: .3, .5
                background_normal: 'dark_bg.jpg'
                background_down: 'light_bg.jpg'
                color: .64, .72, .66, 1
                on_release: root.GeneratePokemon(1)
            Button:
                text:"Type"
                font_name: "PokeFont"
                pos_hint: {'x':.9, 'top': .9}
                size_hint: .3, .5
                background_normal: 'dark_bg.jpg'
                background_down: 'light_bg.jpg'
                color: .64, .72, .66, 1
                on_release: root.GeneratePokemon(2)
                
        ScrollView:
            GridLayout:
                id: poke_grid
                size_hint:1, None
                height: self.minimum_height
                cols:1

<MoveDex>:
    MDBoxLayout:
        md_bg_color: .64, .72, .66, 1
        padding: 10
        id: move
        orientation: "vertical"
        size_hint_y: .9
        Label:
            size_hint: 1, None
            text: "Move-Dex"
            font_name: "PokeFont"
            font_size: self.width/10
            color: .17, .23, .2, 1
        BoxLayout:
            size_hint: 1, None
            orientation: "horizontal"
            Button:
                text: 'Number'
                size_hint: .3, .5
                pos_hint: {'x':.1, 'top': .9}
                background_normal: 'dark_bg.jpg'
                background_down: 'light_bg.jpg'
                color: .64, .72, .66, 1
                font_name: "PokeFont"
                on_release: root.GenerateMove(0)
            Button:
                text:"Name"
                font_name: "PokeFont"
                pos_hint: {'x':.5, 'top': .9}
                size_hint: .3, .5
                background_normal: 'dark_bg.jpg'
                background_down: 'light_bg.jpg'
                color: .64, .72, .66, 1
                font_name: "PokeFont"
                on_release: root.GenerateMove(1)
            Button:
                text:"Type"
                font_name: "PokeFont"
                pos_hint: {'x':.9, 'top': .9}
                size_hint: .3, .5
                background_normal: 'dark_bg.jpg'
                background_down: 'light_bg.jpg'
                color: .64, .72, .66, 1
                font_name: "PokeFont"
                on_release: root.GenerateMove(2)
                
        ScrollView:
            GridLayout:
                id: move_grid
                size_hint:1, None
                height: self.minimum_height
                cols:1

<ItemDex>:
    MDBoxLayout:
        md_bg_color: .64, .72, .66, 1
        padding: 10
        id: item
        orientation: "vertical"
        size_hint_y: .9
        Label:
            size_hint: 1, None
            text: "Item-Dex"
            font_name: "PokeFont"
            font_size: self.width/10
            color: .17, .23, .2, 1
        BoxLayout:
            size_hint: 1, None
            orientation: "horizontal"
            Button:
                text: 'Number'
                size_hint: .3, .5
                pos_hint: {'x':.1, 'top': .9}
                background_normal: 'dark_bg.jpg'
                background_down: 'light_bg.jpg'
                color: .64, .72, .66, 1
                font_name: "PokeFont"
                on_release: root.GenerateItems(0)
            Button:
                text:"Name"
                font_name: "PokeFont"
                pos_hint: {'x':.5, 'top': .9}
                size_hint: .3, .5
                background_normal: 'dark_bg.jpg'
                background_down: 'light_bg.jpg'
                color: .64, .72, .66, 1
                font_name: "PokeFont"
                on_release: root.GenerateItems(1)
            Button:
                text:"Category"
                font_name: "PokeFont"
                pos_hint: {'x':.9, 'top': .9}
                size_hint: .3, .5
                background_normal: 'dark_bg.jpg'
                background_down: 'light_bg.jpg'
                color: .64, .72, .66, 1
                font_name: "PokeFont"
                on_release: root.GenerateItems(2)
                
        ScrollView:
            GridLayout:
                id: item_grid
                size_hint:1, None
                height: self.minimum_height
                cols:1

<Trainer>:
    MDBoxLayout:
        md_bg_color: .64, .72, .66, 1
        padding: 10
        id: trainer
        orientation: "vertical"
        size_hint_y: .9
        Label:
            size_hint: 1, None
            text: "Trainer"
            font_name: "PokeFont"
            font_size: self.width/10
            color: .17, .23, .2, 1
        BoxLayout:
            size_hint: 1, None
            orientation: "horizontal"
            Button:
                text: 'Pokemon'
                size_hint: .3, .5
                pos_hint: {'x':.1, 'top': .9}
                background_normal: 'dark_bg.jpg'
                background_down: 'light_bg.jpg'
                color: .64, .72, .66, 1
                font_name: "PokeFont"
                on_release: root.GenerateTeam()
            Button:
                text:"Moves"
                font_name: "PokeFont"
                pos_hint: {'x':.5, 'top': .9}
                size_hint: .3, .5
                background_normal: 'dark_bg.jpg'
                background_down: 'light_bg.jpg'
                color: .64, .72, .66, 1
                font_name: "PokeFont"
            Button:
                text:"Items"
                font_name: "PokeFont"
                pos_hint: {'x':.9, 'top': .9}
                size_hint: .3, .5
                background_normal: 'dark_bg.jpg'
                background_down: 'light_bg.jpg'
                color: .64, .72, .66, 1
                font_name: "PokeFont"
                
        ScrollView:
            GridLayout:
                id: trainer_grid
                size_hint:1, None
                height: self.minimum_height
                cols:1

<ContentNavigationDrawer>:

    ScrollView:

        MDList:

            OneLineListItem:
                text: "Poke-Dex"
                on_press:
                    root.nav_drawer.set_state("close")
                    root.screen_manager.current = "poke"

            OneLineListItem:
                text: "Move-Dex"
                on_press:
                    root.nav_drawer.set_state("close")
                    root.screen_manager.current = "move"
            OneLineListItem:
                text: "Item-Dex"
                on_press:
                    root.nav_drawer.set_state("close")
                    root.screen_manager.current = "item"
            OneLineListItem:
                text: "Trainer"
                on_press:
                    root.nav_drawer.set_state("close")
                    root.screen_manager.current = "trainer"


Screen:

    MDToolbar:
        id: toolbar
        md_bg_color: app.theme_cls.accent_color
        font_name: "PokeFont"
        pos_hint: {"top": 1}
        elevation: 10
        title: "Poke-Primer"
        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]

    MDNavigationLayout:
        x: toolbar.height

        ScreenManager:
            id: screen_manager
            FirebaseLoginScreen:
                id: firebase_login_screen
                name: "firebase_login_screen"
                debug: True
                remember_user: True
                require_email_verification: True
                web_api_key: "AIzaSyARRlPkOvwnL6IxTozZ0cvH7RIt66oDT-k" # This should be YOUR web_api_key
                background: "background.jpg"
                on_login_success:
                    if self.login_state == 'in': print("User has logged in. Unique identifier is ", self.localId)
                    if self.login_state == 'out': print("User signed out")

                    if self.login_state == 'in': app.local_id = self.localId
                    if self.login_state == 'in': app.user_idToken = self.idToken
                    if self.login_state == 'in': app.display_user_tokens()
                    if self.login_state == 'in': screen_manager.current = 'poke'

            Screen:
                name: "poke"
                PokeDex:
            Screen:
                name: "move"
                MoveDex:
            Screen:
                name: "item"
                ItemDex:
            Screen:
                name: "trainer"
                Trainer:
        MDNavigationDrawer:
            id: nav_drawer

            ContentNavigationDrawer:
                screen_manager: screen_manager
                nav_drawer: nav_drawer

